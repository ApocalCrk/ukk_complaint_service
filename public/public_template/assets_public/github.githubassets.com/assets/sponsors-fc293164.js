System.register(["./chunk-vendor.js","./chunk-frameworks.js"],(function(t,e){"use strict";var s,n,o,r,i,a,c,u,l,d,p;return{setters:[function(t){s=t.o,n=t.a,o=t.f},function(t){r=t.a,i=t.I,a=t.aO,c=t.p,u=t.k,l=t.t,d=t.aZ,p=t.b5}],execute:function(){function t(t,e){return t.filter((t=>t.getAttribute("data-dependency-id")===e))[0]}function h(t,e){t.textContent=e.toString();const s=t.closest(".js-sponsorable-dependency-usage-count-container");s&&(!function(t,e){const s=e.querySelector(".js-sponsorable-dependency-verb");s&&(s.textContent=1===t?s.getAttribute("data-singular"):s.getAttribute("data-plural"))}(e,s),s.hidden=!1)}async function g({currentTarget:t}){m(t,".js-sponsors-meet-the-team-search-modal"),m(t,".js-sponsors-featured-work-search-modal")}async function m(t,e){const s=t.querySelector(e);if(!s)return;await u();const n=s.querySelector(".js-sponsors-featured-item-selection-list");if(!n)return;const o=Array.from(n.querySelectorAll("input[type=checkbox]")),r=o.filter((t=>t.checked)).length,i=parseInt(n.getAttribute("data-featured-items-limit"),10);for(const u of o)u.disabled=r===i&&!u.checked;const a=s.querySelector(".js-sponsors-featured-items-remaining");if(!a)return;const c=i-r;a.textContent=c+" remaining",a.classList.toggle("text-red",c<1)}s("click",".js-refresh-featured-accounts",(function({currentTarget:t}){!async function(t){const e=await r(document,t);document.querySelector(".js-featured-accounts").replaceWith(e)}(t.getAttribute("data-url"))})),s("change",".js-waitlist-countries-select",(({currentTarget:t})=>{!function(t){const e=t.closest(".js-waitlist-countries-container").querySelector(".js-waitlist-country-unsupported-warning"),s=t.selectedOptions[0].closest("optgroup");if(!(s instanceof HTMLOptGroupElement))return;const n=t.getAttribute("data-supported-key");e&&(e.hidden=s.label===n)}(t)})),s("change",".js-waitlist-fiscal-host-select",(({currentTarget:t})=>{var e;e=t,document.querySelector(".js-sponsors-other-fiscal-host-inputs").hidden="other"!==e.selectedOptions[0].value})),s("change",".js-sponsors-required-input-trigger",(({currentTarget:t})=>{const e=t;if(""===e.value)return;const s=document.querySelectorAll(".js-sponsors-required-input-target");for(const n of s){const t=n.getAttribute("data-sponsors-trigger-values");t&&(n.required=t.includes(e.value))}})),n(".js-sponsorable-dependencies",(e=>{const s=e.getAttribute("data-url"),n=e.getAttribute("data-dependency-ids");JSON.parse(n).length<1||async function(e,s,n){const o=e.querySelector(".js-data-url-csrf");if(!o)return;const r=await fetch(n,{headers:{"Content-Type":"application/json",Accept:"application/json","Scoped-CSRF-Token":o.value,"X-Requested-With":"XMLHttpRequest"},method:"POST",mode:"same-origin",body:s});if(!r.ok)return;const i=await r.json(),a=Array.from(e.querySelectorAll(".js-sponsorable-dependency-usage-count"));for(const c in i){const e=t(a,c);e&&h(e,i[c]||0)}}(e,n,s)})),n(".js-loading-stripe-account-details",{add(t){!async function(t){const e=await a(t),s=c(document,await e.text());document.querySelector(".js-stripe-onboarding-container").replaceWith(s)}(t.getAttribute("data-url"))}}),s("change",".js-sponsors-dashboard-profile-form",g),s("reset",".js-sponsors-dashboard-profile-form",g),n(".js-sponsors-sortable-list",{async add(t){const{Sortable:s}=await e.import("./chunk-sortable-behavior.js");s.create(t,{animation:150,item:".js-sponsors-sortable-item",handle:".js-sponsors-sortable-item-handle",chosenClass:"is-dragging"})}});const f="Monthly amount you're aiming for:";async function y(t){const e=t,s=document.querySelector(".js-sponsors-goals-type-label"),n=document.querySelector(".js-sponsors-goal-target-preview"),o=document.querySelector(".js-sponsors-goal-target-progress-preview");let r;""===e.value.trim()?r="":s.textContent===f?r=`$${e.value} per month`:(r=e.value+" sponsor",parseInt(e.value)>1&&(r+="s")),o.textContent=r,s.textContent===f?n.textContent="earn "+r:n.textContent="have "+r,async function(t,e){const s=document.querySelector(".js-sponsors-goal-percentage-preview"),n=document.querySelector(".js-sponsors-goal-percentage-bar-preview");let o=0;const r=parseInt(t,10);if(r&&r>0){let t=0;if(e===f){const e=n.getAttribute("data-preview-current-value-sponsorships")||"0";t=parseInt(e,10)}else{const e=n.getAttribute("data-preview-current-value-sponsors")||"0";t=parseInt(e,10)}o=Math.floor(100*t/r),0===o&&t>0&&(o=1),o=Math.min(o,100)}s.textContent=o+"%",n.style.width=o+"%"}(e.value,s.textContent||"")}s("change",".js-sponsors-goals-radio-trigger",(async function({currentTarget:t}){var e;const s=t,n=document.querySelector(".js-sponsors-goals-radio-target");if(!n)return;n.hidden=!1;const o=n.querySelector(".js-sponsors-goals-type-label");if(o){const t=n.querySelector(".js-sponsors-goals-sponsorship-per-month-label"),r=n.querySelector(".js-sponsors-goals-sponsorship-currency-sign"),i=n.querySelector(".js-sponsors-goals-accept-public-sponsorship"),a=i.querySelector("input[type=checkbox]"),c=n.querySelector("button[type=submit]");"total_sponsors_count"===s.value?(o.textContent="Number of sponsors you're aiming for:",t.hidden=!0,r.hidden=!0,i.hidden=!0,a.required=!1):(o.textContent=f,t.hidden=!1,r.hidden=!1,i.hidden=!1,a.required=!0),c.disabled=!(null===(e=c.form)||void 0===e?void 0:e.checkValidity());y(document.querySelector(".js-sponsors-goal-target-input"))}}));!async function(){await i;const t=document.querySelector(".js-sponsors-goal-target-input");t&&t.addEventListener("input",(({target:t})=>y(t)));const e=document.querySelector(".js-sponsors-goal-description-input");e&&e.addEventListener("input",(({target:t})=>async function(t){const e=t,s=document.querySelector(".js-sponsors-goal-description-preview");""===e.value.trim()?s.textContent="No description yet":s.textContent=e.value}(t)))}();const b=Math.random,j=Math.cos,v=Math.sin,w=Math.PI,S=2*w,q=100,x=-.1;let A,C;const k=[],L=["#6a737d","#0366d6","#28a745","#ffd33d","#f66a0a","#6f42c1","#ea4aaa"];function T(){const t=Math.floor(Math.random()*L.length);return L[t]}const I=.1;const M=document.createElement("div");M.style.position="fixed",M.style.top="0",M.style.left="0",M.style.width="100%",M.style.height="0",M.style.overflow="visible",M.style.zIndex="9999";class Confetto{constructor(t){this.frame=0,this.outer=document.createElement("div"),this.inner=document.createElement("div"),this.outer.appendChild(this.inner),this.outer.style.position="absolute",this.outer.style.width=3+9*b()+"px",this.outer.style.height=3+9*b()+"px",this.inner.style.width="100%",this.inner.style.height="100%",this.inner.style.backgroundColor=t(),this.outer.style.perspective="50px",this.outer.style.transform=`rotate(${360*b()}deg)`,this.theta=360*b(),this.axis=`rotate3D(${j(360*b())},${j(360*b())},0,`,this.inner.style.transform=`${this.axis}${this.theta}deg)`,this.dTheta=.4+.29999999999999993*b(),this.x=window.innerWidth*b(),this.y=-100,this.dx=v(x+.2*b()),this.dy=.13+.18*b(),this.outer.style.left=this.x+"px",this.outer.style.top=this.y+"px",this.splineX=function(){const t=[I,.9];let e=.8;const s=[0,1];for(;e;){let n,o,r,i,a,c=e*b();for(n=0,o=t.length,e=0;n<o;n+=2){if(i=t[n],a=t[n+1],r=a-i,c<e+r){const t=c+i-e;s.push(t),c=t;break}e+=r}const u=c-I,l=c+I;for(n=t.length-1;n>0;n-=2)o=n-1,i=t[o],a=t[n],i>=u&&i<l?a>l?t[o]=l:t.splice(o,2):i<u&&a>u&&(a<=l?t[n]=u:t.splice(n,0,u,l));for(n=0,o=t.length,e=0;n<o;n+=2)e+=t[n+1]-t[n]}return s.sort()}(),this.splineY=[];const e=this.splineX.length-1;for(let s=1;s<e;++s)this.splineY[s]=q*b();this.splineY[0]=this.splineY[e]=q*b()}update(t,e){this.frame+=e,this.x+=this.dx*e,this.y+=this.dy*e,this.theta+=this.dTheta*e;let s=this.frame%7777/7777,n=0,o=1;for(;s>=this.splineX[o];)n=o++;const r=(i=this.splineY[n],a=this.splineY[o],c=(s-this.splineX[n])/(this.splineX[o]-this.splineX[n]),(1-j(w*c))/2*(a-i)+i);var i,a,c;return s*=S,this.inner.style.transform=`${this.axis}${this.theta}deg)`,this.outer.style.left=this.x+r*j(s)+"px",this.outer.style.top=this.y+r*v(s)+"px",this.y>t+q}}function $(t){const e=null==t?5e3:t;if(!C){document.body.appendChild(M);const t=()=>{const e=new Confetto(T);k.push(e),M.appendChild(e.outer),A=window.setTimeout(t,40*b())};let s;t();const n=t=>{const e=s?t-s:0;s=t;const o=window.innerHeight;for(let s=k.length-1;s>=0;--s)k[s].update(o,e)&&(M.removeChild(k[s].outer),k.splice(s,1));A||k.length?C=requestAnimationFrame(n):(document.body.removeChild(M),C=void 0)};window.setTimeout((function(){clearTimeout(A),A=void 0}),e),requestAnimationFrame(n)}}function R(t,e){const s=document.querySelector(".js-sponsorship-billing-details-dialog"),n=new URL(s.getAttribute("src"),window.location.origin),o=new URLSearchParams(n.search),r=o.get("return_to")||"",i=new URL(r,window.location.origin);let a=new URLSearchParams(window.location.search).get("tier_id");if(!a){a=new URLSearchParams(i.search).get("tier_id")}let c=new URLSearchParams(window.location.search).get("editing")||"";if(!c){c=new URLSearchParams(i.search).get("editing")||""}const u=new URLSearchParams;u.set("privacy_level",t),u.set("email_opt_in",e),u.set("tier_id",a||""),u.set("editing",c||"");const l=`${i.pathname}?${u.toString()}`,d=encodeURIComponent(l);o.set("return_to",i.toString()),s.setAttribute("src",`${n.pathname}?return_to=${d}`)}function E(t){t.hasAttribute("data-valid-payment-method")&&(t.disabled=!1,t.classList.remove("tooltipped","tooltipped-s","tooltipped-no-delay"))}s("change",".js-sponsorship-privacy-level",(function(t){const e=t.target.value,s=document.querySelector(".js-sponsorship-email-opt-in").checked?"on":"off";E(document.querySelector(".js-sponsorship-submit")),R(e,s)})),l(".js-sponsorship-custom-tier-description",(function(t){const e=t.currentTarget;if(e.value!==e.defaultValue){E(document.querySelector(".js-sponsorship-submit"))}})),s("change",".js-sponsorship-email-opt-in",(function(t){const e=t.target.checked?"on":"off",s=Array.from(document.querySelectorAll(".js-sponsorship-privacy-level")).find((t=>t.checked)),n=s?s.value:"public";E(document.querySelector(".js-sponsorship-submit")),R(n,e)})),n(".js-show-confetti-party",(function(t){$();const e=t.getAttribute("data-dismiss-url");if(e){const s=t.querySelector(".js-data-dismiss-url-csrf");fetch(e,{method:"POST",mode:"same-origin",headers:{"Scoped-CSRF-Token":s.value,"X-Requested-With":"XMLHttpRequest"}})}}));n(".js-sponsors-goals-impact",(function(t){!async function(t){const e=t.querySelector(".js-sponsors-goals-impact-progress-bar"),s=e.getAttribute("data-percentage-impact");await p(500),s&&(e.style.width=s+"%");const n=t.querySelector(".js-sponsors-goals-impact-heart");if(!n)return;await p(450),n.hidden=!1,n.classList.add("anim-scale-in");const o=n.querySelector(".sponsors-goals-heart-anim");await p(100),o.classList.add("is-active")}(t)})),n(".js-sponsors-account-switcher",(t=>{t.addEventListener("toggle",(({target:t})=>{t instanceof HTMLElement&&t.hasAttribute("open")&&d(t)}))})),n(".js-tier-shared-parent auto-check.js-tier-pricing-check",(t=>{const e=t.closest(".js-tier-shared-parent").querySelector(".js-publish-tier-button");t.addEventListener("error",(()=>e.disabled=!0)),t.addEventListener("load",(()=>e.disabled=!1)),o(t.querySelector("input"),"input")})),l(".js-sponsors-custom-amount-input",(function(t){const e=t.target,s=parseInt(e.value,10),n=e.closest(".js-sponsors-custom-amount-container").querySelector(".js-sponsors-custom-amount-message"),o=JSON.parse(n.getAttribute("data-tier-minimums")).filter((t=>s>t))[0];if(o){const t=n.getAttribute("data-prefix"),e=n.getAttribute("data-suffix");n.textContent=[t,"$"+o,e].join(" ")}else{const t=n.getAttribute("data-default");n.textContent=t}})),s("change",'.js-sponsors-newsletter-tiers input[type="checkbox"]',(function(t){const e=t.currentTarget.closest(".js-sponsors-newsletter-tiers"),s=e.querySelector(".js-sponsors-newsletter-tiers-default"),n=e.querySelector(".js-sponsors-newsletter-tiers-count"),o="0"===e.querySelector("[data-check-all-count]").textContent;s.hidden=!o,n.hidden=o})),n(".js-fetch-stripe-details",{add(t){const e=t.getAttribute("data-url");!async function(t,e){const s=await r(document,e);t.replaceWith(s)}(t,e)}}),n(".js-validate-at-least-one-checkbox-checked",(function(t){const e=t.getAttribute("data-none-checked-error-message"),s=t.querySelector(".js-survey-checkbox");s.required=!0,s.addEventListener("invalid",(function(){s.setCustomValidity(e)})),t.addEventListener("change",(function(){s.required=!1;const n=t.querySelector(".js-survey-checkbox:checked");s.setCustomValidity(n?"":e)}))}));const O="build-in-animate",_=.01;n(".js-build-in-trigger[data-build-in-stagger], .js-build-in-group[data-build-in-stagger]",(t=>{const e=parseInt(t.getAttribute("data-build-in-stagger")),s=t.querySelectorAll(".js-build-in-item");for(let n=0;n<s.length;n++)s[n].style.transitionDelay=n*e+"ms"}));const N=new IntersectionObserver(X,{rootMargin:"-0% 0% -30% 0%",threshold:_});function X(t){for(const e of t)if(e.target.classList.toggle(O,e.isIntersecting),e.target.classList.contains("js-build-in-trigger"))for(const t of e.target.querySelectorAll(".js-build-in-item"))t.classList.toggle(O,e.isIntersecting)}function P(t){const e=Number(t.getAttribute("data-build-margin-bottom")||30),s=Number(t.getAttribute("data-build-margin-top")||0),n=Number(t.getAttribute("data-build-threshold")||_);return{marginBottom:e,marginTop:s,threshold:n,isDefault:30===e&&0===s&&n===_}}n(".js-build-in, .js-build-in-trigger",(t=>{const e=P(t);if(e.isDefault)return N.observe(t);new IntersectionObserver(X,{rootMargin:`-${e.marginTop}% 0% -${e.marginBottom}% 0%`,threshold:e.threshold}).observe(t)})),n(".js-viewport-aware-video",{constructor:HTMLMediaElement,add(t){const e=t.getAttribute("data-threshold")||"0.2";new IntersectionObserver((e=>{for(const s of e)s.isIntersecting?t.play():t.pause()}),{threshold:Number(e)}).observe(t)}});function U(t){for(const e of t)if(e.isIntersecting){const t=Number(e.target.getAttribute("data-build-confetti-duration")||3e3),s=Number(e.target.getAttribute("data-build-confetti-delay")||0);window.setTimeout((()=>$(t)),s)}}n(".js-build-in-confetti",(t=>{const e=P(t);new IntersectionObserver(U,{rootMargin:`-${e.marginTop}% 0% -${e.marginBottom}% 0%`,threshold:e.threshold}).observe(t)}))}}}));
//# sourceMappingURL=sponsors-79882e02.js.map
